<!--
FILE: views/userMessages.ejs

DESCRIPTION: Displays all incoming messages.

CREATED BY: Joanne
-->
<!DOCTYPE html>
<html>

<head>
    <title>
        <%= title %>
    </title>
</head>

<body>
    <%- include('partials/navbar') %>
        <div class="flex-grow-1">
            <div class="h1 mt-2 ms-2">
                Reviews
            </div>
            <div class="d-flex flex-wrap justify-content-center">
                <div class="justify-content-center">
                    <div class="overflow-auto col m-2 border border-dark p-3 mb-2 bg-dark text-white rounded-3"
                        style="width:800px;">
                        <!-- checks if the message is empty or not-->
                        <% if (reviewInfo.length !=0) { %>
                            <!-- loops through the messages array and generates each message with the proper information-->
                            <% for (let i=0; i < reviewInfo.length; i++) { %>
                                <div class="col-sm border border-secondary d-flex">
                                    <div class="col">
                                        <div class="d-flex justify-content-between">
                                            <div class="fs-3 m-2">
                                                <b> Title: </b> <%= reviewInfo[i].header%>
                                            </div>
                                            <div class="fs-5 m-2">
                                                <b>Rating:</b> <%= reviewInfo[i].rating%>
                                            </div>
                                        </div>
                                        <div class="fs-6 col-sm m-2">
                                            <!-- loops around the sender array and matches the id to the proper message-->
                                            <% for (let j=0; j < reviewerName.length; j++) {%>
                                                <% if (reviewerName[j].idUsers===reviewInfo[i].reviewer) { %>
                                                    <b>By: </b>
                                                    <%= `${reviewerName[j].firstname} ${reviewerName[j].lastname}`%>
                                                    <%break;%>
                                                <%}else{%>
                                                    <%continue;%>
                                                <%}%>
                                             <%}%>
                                        </div>
                                        <div class="fs-6 col-sm m-2 text-wrap">
                                            <b>Review: </b>
                                            <%= reviewInfo[i].body%>
                                        </div>
                                    </div>
                                </div>
                            <%}%>
                        <%}else{%>
                            <div class="h2">
                                No reviews have been made for you.
                            </div>
                        <%}%>
                    </div>
                </div>
            </div>
        </div>
        <%- include('partials/footer') %>


            <script src="/javascripts/bootstrap.bundle.js"></script>
            <script src="/javascripts/search.js"></script>
</body>

</html>